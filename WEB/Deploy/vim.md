![image.png](https://cuichonghe.oss-cn-shenzhen.aliyuncs.com/markdown/20230118163635.png)


查询软连接命令
```shell
#查找 vi 的运行文件 
which vi 
ls -l /usr/bin/vi 
ls -l /etc/alternatives/vi 
ls -l /usr/bin/vim.basic 

# 查找 vim 的运行文件 
which vim 
ls -l /usr/bin/vim 
ls -l /etc/alternatives/vim 
ls -l /usr/bin/vim.basic

vi 文件名 存在打开 不存在新建 
vi 文件名 + 行数 
不指定行号，会直接定位到文件末尾 如果 vi 异常退出，在磁盘上可能会保存有 交换文件 下次再使用 vi 编辑该文件时，会看到以下屏幕信息，按下字母 d 可以 删除交换文件 即可

```

# 三种工作模式

## 命令模式

打开文件首先进入命令模式，是使用 `vi` 的入口 
通过命令对文件进行常规的编辑操作，例如：定位、翻页、复制、粘贴、删除…… 
在其他图形编辑器下，通过快捷键或者鼠标 实现的操作，都在命令模式下实现

## 末行模式 
执行 保存、退出 等操作 

要退出 `vi` 返回到控制台，需要在末行模式下输入命令 
末行模式是 `vi` 的出口 
```vim
w  保存 
q  退出，如果没有保存，不允许退出 
q! 强行退出，不保存退出 
wq 保存并退出 
x  保存并退出
```

## 编辑模式

命令线路图

### 重复次数 
在命令模式下，数字 + 命令,可以让该命令重复执行指定次数 

### 移动和选择

vi 之所以快，关键在于 能够快速定位到要编辑的代码行 移动命令 能够 和 编辑操作 命令 组合使用  

```
移动（基本） 
h ← 
j ↓ 
k ↑ 
l → 

w 向后移动一个单词 
b 向前移动一个单词 

0 行首 
^ 行首，第一个不是空白字符的位置 
$ 行尾 

gg 文件顶部 
G 文件末尾 
数字gg 移动到 数字 对应行数 
数字G 移动到 数字 对应行数 
:数字 移动到 数字 对应行数 

Ctrl+b 向上翻页 
Ctrl+f 向下翻页 
H 屏幕顶部 
M 屏幕中间 
L 屏幕底部

-------------------------------------
移动（程序） 
`vi` 中使用 空行 来区分段落 
{ 上一段 
} 下一段 
% 括号匹配及切换

```

```

标记 
mx 添加标记 x，x 是 a~z 或者 A~Z 之间的任意一个字母 
'x 直接定位到标记 x 所在位置 
添加了标记的 行如果被删除，标记同时被删除 
如果 在其他行添加了相同名称的标记，之前添加的标记也会被替换掉

```

```
选中文本（可视模式） 
v 可视模式 
V 可视行模式 
Ctrl + v 可视块模式 
可视模式下，可以和 移动命令 连用 
ggVG 能够选中所有内容

```



### 编辑操作 
#### 撤销
```
u 撤销上次命令 
CTRL + r 恢复撤销的命令
```

#### 删除

```
删除文本 
x 删除光标所在字符，或者选中文字 
d(移动命令) 删除移动命令对应的内容 
dd 删除光标所在行，可以 ndd 复制多行 
D 删除至行尾

删除命令可以和 移动命令 连用，以下是常见的组合命令 
dw # 从光标位置删除到单词末尾 
d0 # 从光标位置删除到一行的起始位置
d} # 从光标位置删除到段落结尾 
ndd # 从光标位置向下连续删除 n 行 
d代码行G # 从光标所在行 删除到 指定代码行 之间的所有代码 
d'a # 从光标所在行 删除到 标记a 之间的所有代码
```
#### 复制、粘贴
```
`vi` 中提供有一个 被复制文本的缓冲区 
复制 命令会将选中的文字保存在缓冲区 
删除 命令删除的文字会被保存在缓冲区 
在需要的位置，使用 粘贴 命令可以将缓冲区的文字插入到光标所在位置

y(移动命令) 复制 
yy 复制一行，可以 nyy 复制多行 
p 粘贴

vi 中的 文本缓冲区同样只有一个，如果后续做过 复制、剪切 操作， 之前缓冲区中的内容会被替换 
vi 中的 文本缓冲区 和系统的 剪贴板 不是同一个 所以在其他软件中使用 `CTRL + C` 复制的内容，不能在 `vi` 中通过 `P` 命令粘贴 
可以在 编辑模式 下使用 鼠标右键粘贴
```















### 查找替换







